{"remainingRequest":"/Users/it_calvin/Desktop/my work/demo/node_modules/thread-loader/dist/cjs.js!/Users/it_calvin/Desktop/my work/demo/node_modules/babel-loader/lib/index.js!/Users/it_calvin/Desktop/my work/demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/it_calvin/Desktop/my work/demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/it_calvin/Desktop/my work/demo/src/components/pages/CustomerCheckout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/it_calvin/Desktop/my work/demo/src/components/pages/CustomerCheckout.vue","mtime":1653988324368},{"path":"/Users/it_calvin/Desktop/my work/demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/it_calvin/Desktop/my work/demo/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/it_calvin/Desktop/my work/demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/it_calvin/Desktop/my work/demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/it_calvin/Desktop/my work/demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAvLyDlrprnvqnos4fmlpnntZDmp4sKICAgIHJldHVybiB7CiAgICAgIG9yZGVyOiB7CiAgICAgICAgdXNlcjogewogICAgICAgICAgYWRkcmVzczogIiIsCiAgICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgICB0ZWw6ICIiLAogICAgICAgICAgbmFtZTogIiIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG9yZGVySWQ6ICIiIC8vIOWtmOaUvuioguWWruiZn+eivAoKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRPcmRlcjogZnVuY3Rpb24gZ2V0T3JkZXIoKSB7CiAgICAgIC8vIOWPluW+l+ioguWWruizh+aWmQogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB2YXIgdXJsID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSCwgIi9hcGkvIikuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQ1VTVE9NUEFUSCwgIi9vcmRlci8iKS5jb25jYXQodm0ub3JkZXJJZCk7IC8vIOWPluW+l+ioguWWruizh+aWmQoKICAgICAgdm0uJHN0b3JlLmRpc3BhdGNoKCJ1cGRhdGVMb2FkaW5nIiwgdHJ1ZSk7CiAgICAgIHRoaXMuJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2bS5vcmRlciA9IHJlc3BvbnNlLmRhdGEub3JkZXI7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgIHZtLiRzdG9yZS5kaXNwYXRjaCgidXBkYXRlTG9hZGluZyIsIGZhbHNlKTsKICAgICAgfSk7CiAgICB9LAogICAgcGF5T3JkZXI6IGZ1bmN0aW9uIHBheU9yZGVyKCkgewogICAgICAvLyDnorroqo3ku5jmrL4KICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIHVybCA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEgsICIvYXBpLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0NVU1RPTVBBVEgsICIvcGF5LyIpLmNvbmNhdCh2bS5vcmRlcklkKTsgLy8g56K66KqN5LuY5qy+55qEYXBp6Lev5b6RCgogICAgICB2bS4kc3RvcmUuZGlzcGF0Y2goInVwZGF0ZUxvYWRpbmciLCB0cnVlKTsKICAgICAgdGhpcy4kaHR0cC5wb3N0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvLyDlm6DngrrmmK/lsIfoqILllq7nmbzpgIHlh7rljrvvvIzlm6DmraRhamF46KGM54K66KaB5pS554K6cG9zdAogICAgICAgIC8vIHZtLm9yZGVyID0gcmVzcG9uc2UuZGF0YS5vcmRlcjsgLy8g5LuY5qy+6KGM54K65Y+v5Lul55yB5Y676YCZ5LiA6KGMCiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwoKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICBhbGVydCgn5LuY5qy+5oiQ5Yqf77yM5YaN5Y675oiR5YCR55qE6LOj5aC055yL55yL5ZCn77yBJyk7CiAgICAgICAgICB2bS5nZXRPcmRlcigpOwogICAgICAgICAgdm0uJHJvdXRlci5wdXNoKCIvcHJvZHVjdF9saXN0Iik7CiAgICAgICAgfQoKICAgICAgICB2bS4kc3RvcmUuZGlzcGF0Y2goInVwZGF0ZUxvYWRpbmciLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzTG9hZGluZzogZnVuY3Rpb24gaXNMb2FkaW5nKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuaXNMb2FkaW5nOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIC8vIHRoaXMub3JkZXJJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5vcmRlcklkOyAvLyDpgJnoo6Ekcm91dGUucGFyYW1z55qEcGFyYW1z5piv5Y+W5b6X6Lev5b6R5LiK55qE5Y+D5pW477yM6YCZ6YKK5Y2z5pivb3JkZXJJZAogICAgY29uc29sZS5sb2codGhpcy5vcmRlcklkKTsgLy8g5qqi5p+l6KiC5Zau6Jmf56K85piv5ZCm5pyJ56ym5ZCI6Lev5b6R5ZCN56ixCgogICAgdGhpcy5nZXRPcmRlcigpOwogIH0KfTs="},{"version":3,"sources":["CustomerCheckout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA,eAAA;AACA,EAAA,IADA,kBACA;AACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,IAAA,EAAA;AACA,UAAA,OAAA,EAAA,EADA;AAEA,UAAA,KAAA,EAAA,EAFA;AAGA,UAAA,GAAA,EAAA,EAHA;AAIA,UAAA,IAAA,EAAA;AAJA;AADA,OADA;AASA,MAAA,OAAA,EAAA,EATA,CASA;;AATA,KAAA;AAWA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA;AACA,UAAA,EAAA,GAAA,IAAA;AACA,UAAA,GAAA,aAAA,OAAA,CAAA,GAAA,CAAA,eAAA,kBAAA,OAAA,CAAA,GAAA,CAAA,kBAAA,oBAAA,EAAA,CAAA,OAAA,CAAA,CAHA,CAGA;;AACA,MAAA,EAAA,CAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,IAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,EAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,QAAA,EAAA,CAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,KAAA;AACA,OAJA;AAKA,KAXA;AAYA,IAAA,QAZA,sBAYA;AACA;AACA,UAAA,EAAA,GAAA,IAAA;AACA,UAAA,GAAA,aAAA,OAAA,CAAA,GAAA,CAAA,eAAA,kBAAA,OAAA,CAAA,GAAA,CAAA,kBAAA,kBAAA,EAAA,CAAA,OAAA,CAAA,CAHA,CAGA;;AACA,MAAA,EAAA,CAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,IAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AAAA;AACA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,UAAA,KAAA,CAAA,kBAAA,CAAA;AACA,UAAA,EAAA,CAAA,QAAA;AACA,UAAA,EAAA,CAAA,OAAA,CAAA,IAAA;AACA;;AACA,QAAA,EAAA,CAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,KAAA;AACA,OATA;AAUA;AA3BA,GAfA;AA4CA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,SAAA;AACA;AAHA,GA5CA;AAiDA,EAAA,OAjDA,qBAiDA;AACA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,KAAA,OAAA,EAFA,CAEA;;AACA,SAAA,QAAA;AACA;AArDA,CAAA","sourcesContent":["<template>\n  <div class=\"my-5 row justify-content-center\">\n    <form class=\"col-md-6\" @submit.prevent=\"payOrder\">\n      <table class=\"table col-sm-12\">\n        <thead>\n          <th>品名</th>\n          <th>數量</th>\n          <th>單價</th>\n        </thead>\n        <tbody>\n          <tr v-for=\"item in order.products\" :key=\"item.id\">\n            <td class=\"align-middle\">{{ item.product.title }}</td>\n            <td class=\"align-middle\">{{ item.qty }}/{{ item.product.unit }}</td>\n            <td class=\"align-middle text-right\">{{ item.final_total }}</td>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td colspan=\"2\" class=\"text-right\">總計</td>\n            <td class=\"text-right\">{{ order.total }}</td>\n          </tr>\n        </tfoot>\n      </table>\n\n      <table class=\"table col-sm-12\">\n        <tbody>\n          <tr>\n            <th width=\"100\">Email</th>\n            <td>{{ order.user.email }}</td>\n          </tr>\n          <tr>\n            <th>姓名</th>\n            <td>{{ order.user.name }}</td>\n          </tr>\n          <tr>\n            <th>收件人電話</th>\n            <td>{{ order.user.tel }}</td>\n          </tr>\n          <tr>\n            <th>收件人地址</th>\n            <td>{{ order.user.address }}</td>\n          </tr>\n          <tr>\n            <th>付款狀態</th>\n            <td>\n              <span v-if=\"!order.is_paid\">尚未付款</span>\n              <span v-else class=\"text-success\">付款完成</span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div class=\"text-right\" v-if=\"order.is_paid === false\">\n        <button class=\"btn btn-danger\">確認付款去</button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    // 定義資料結構\n    return {\n      order: {\n        user: {\n          address: \"\",\n          email: \"\",\n          tel: \"\",\n          name: \"\"\n        }\n      },\n      orderId: \"\" // 存放訂單號碼\n    };\n  },\n  methods: {\n    getOrder() {\n      // 取得訂單資料\n      const vm = this;\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order/${vm.orderId}`; // 取得訂單資料\n      vm.$store.dispatch(\"updateLoading\", true);\n      this.$http.get(url).then(response => {\n        vm.order = response.data.order;\n        console.log(response);\n        vm.$store.dispatch(\"updateLoading\", false);\n      });\n    },\n    payOrder() {\n      // 確認付款\n      const vm = this;\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/pay/${vm.orderId}`; // 確認付款的api路徑\n      vm.$store.dispatch(\"updateLoading\", true);\n      this.$http.post(url).then(response => { // 因為是將訂單發送出去，因此ajax行為要改為post\n        // vm.order = response.data.order; // 付款行為可以省去這一行\n        console.log(response);\n        if(response.data.success) {\n            alert('付款成功，再去我們的賣場看看吧！')\n            vm.getOrder();\n            vm.$router.push(`/product_list`);\n        }\n        vm.$store.dispatch(\"updateLoading\", false);\n      });\n    },\n  },\n  computed: {\n    isLoading() {\n      return this.$store.state.isLoading;\n    },\n  },\n  created() {\n    // this.orderId = this.$route.params.orderId; // 這裡$route.params的params是取得路徑上的參數，這邊即是orderId\n    console.log(this.orderId); // 檢查訂單號碼是否有符合路徑名稱\n    this.getOrder();\n  }\n};\n</script>\n"],"sourceRoot":"src/components/pages"}]}